FROM archlinux:latest

RUN pacman -Syy --needed --noconfirm sudo

RUN useradd --create-home grepsedawk
RUN echo "grepsedawk ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers

COPY . /home/grepsedawk/.dotfiles
WORKDIR /home/grepsedawk/.dotfiles
RUN chown -R grepsedawk:grepsedawk .

USER grepsedawk

RUN ./install-scripts/install

RUN mkdir $HOME/.ssh

CMD /usr/sbin/zsh
